[package]
name = "gpuix-native"
version = "0.1.0"
edition = "2021"
description = "GPUI bindings for Node.js via napi-rs"
license = "Apache-2.0"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
napi = { version = "2", features = ["napi8", "serde-json"] }
napi-derive = "2"
serde = { version = "1", features = ["derive"] }
serde_json = "1"

# GPUI from Zed repository
# Pin to specific commit to avoid core-graphics version conflicts
# (latest main has core-graphics 0.25 which conflicts with font-kit's core-text dependency)
gpui = { git = "https://github.com/zed-industries/zed", rev = "83ca31055cf3e56aa8a704ac49e1686434f4e640" }

# macOS text/graphics deps - pinned to avoid core-graphics version conflicts
# core-text 21.1.0 uses core-graphics 0.25 which conflicts with font-kit's core-graphics 0.24
[target.'cfg(target_os = "macos")'.dependencies]
core-text = "=21.0.0"
core-graphics = "=0.24.0"

[build-dependencies]
napi-build = "2"

[[example]]
name = "hello"
path = "examples/hello.rs"

[profile.release]
lto = true
